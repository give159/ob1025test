# Python unittestãƒã‚¹ã‚¿ãƒ¼ã‚¬ã‚¤ãƒ‰
## æ–°äººã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®å®Ÿè·µçš„ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å…¥é–€

---

## ğŸ“š ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨

ã“ã®ã‚¬ã‚¤ãƒ‰ã‚’èª­ã‚ã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒ**ã‚¼ãƒ­ã‹ã‚‰æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™**ï¼š

- âœ… unittest ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹
- âœ… ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã¨ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã®æ›¸ãæ–¹
- âœ… setUp/tearDown ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªãƒ†ã‚¹ãƒˆ
- âœ… ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ã®ä½¿ã„åˆ†ã‘
- âœ… çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè£…
- âœ… ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›

---

## 1. unittestã¨ã¯ï¼Ÿ

### ãªãœãƒ†ã‚¹ãƒˆã‚’æ›¸ãã®ã‹ï¼Ÿ

```python
# ãƒ†ã‚¹ãƒˆãŒãªã„ã‚³ãƒ¼ãƒ‰ = ä¸å®‰
def add(a, b):
    return a + b

# æœ¬å½“ã«å‹•ãï¼Ÿãƒã‚°ã¯ãªã„ï¼Ÿ
# å°†æ¥å¤‰æ›´ã—ã¦ã‚‚å¤§ä¸ˆå¤«ï¼Ÿ
```

```python
# ãƒ†ã‚¹ãƒˆãŒã‚ã‚‹ã‚³ãƒ¼ãƒ‰ = å®‰å¿ƒ
def add(a, b):
    return a + b

class TestAdd(unittest.TestCase):
    def test_add_positive(self):
        self.assertEqual(add(2, 3), 5)  # OK!
    
    def test_add_negative(self):
        self.assertEqual(add(-1, 1), 0)  # OK!
```

**ãƒ†ã‚¹ãƒˆã‚’æ›¸ããƒ¡ãƒªãƒƒãƒˆï¼š**
- ğŸ›¡ï¸ ãƒã‚°ã®æ—©æœŸç™ºè¦‹
- ğŸ“ å‹•ä½œä»•æ§˜ã®æ˜ç¤º
- ğŸ”„ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®å®‰å…¨æ€§
- ğŸ¤ ãƒãƒ¼ãƒ é–‹ç™ºã§ã®ä¿¡é ¼æ€§

---

## 2. æœ€åˆã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã

### Step 1: æœ€å°ã®ãƒ†ã‚¹ãƒˆ

```python
import unittest

# ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ã‚¯ãƒ©ã‚¹
class Calculator:
    def add(self, a, b):
        return a + b

# ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ï¼ˆunittest.TestCaseã‚’ç¶™æ‰¿ï¼‰
class TestCalculator(unittest.TestCase):
    
    # test_ ã§å§‹ã¾ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹
    def test_add(self):
        calc = Calculator()
        result = calc.add(2, 3)
        self.assertEqual(result, 5)  # æœŸå¾…å€¤ã¨æ¯”è¼ƒ

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
if __name__ == "__main__":
    unittest.main()
```

**å®Ÿè¡Œæ–¹æ³•ï¼š**
```bash
python test_calculator.py
```

**å‡ºåŠ›ä¾‹ï¼š**
```
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK
```

---

## 3. ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®åŸºæœ¬æ§‹é€ 

### 3.1 å‘½åè¦å‰‡

```python
# âŒ æ‚ªã„ä¾‹ï¼šãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ã„ãªã„
class MyTest:  # TestCase ã‚’ç¶™æ‰¿ã—ã¦ã„ãªã„
    def check_something(self):  # test_ ã§å§‹ã¾ã£ã¦ã„ãªã„
        pass

# âœ… è‰¯ã„ä¾‹ï¼šãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ã„ã‚‹
class TestEmployee(unittest.TestCase):  # TestCase ã‚’ç¶™æ‰¿
    def test_get_name(self):  # test_ ã§å§‹ã¾ã‚‹
        pass
    
    def test_set_salary(self):  # test_ ã§å§‹ã¾ã‚‹
        pass
```

**å‘½åè¦å‰‡ï¼š**
- ã‚¯ãƒ©ã‚¹å: `Test` + ãƒ†ã‚¹ãƒˆå¯¾è±¡å
- ãƒ¡ã‚½ãƒƒãƒ‰å: `test_` + æ©Ÿèƒ½å
- ãƒ•ã‚¡ã‚¤ãƒ«å: `test_` + å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«å

### 3.2 åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰

```python
class TestEmployee(unittest.TestCase):
    
    def test_initial_values(self):
        """åˆæœŸå€¤ã®ãƒ†ã‚¹ãƒˆ"""
        emp = Employee()
        
        # å®Ÿéš›ã®å€¤ã¨æœŸå¾…å€¤ã‚’æ¯”è¼ƒ
        self.assertEqual(emp.get_name(), "")
        self.assertEqual(emp.get_salary(), 0)
```

**ãƒã‚¤ãƒ³ãƒˆï¼š**
- 1ãƒ¡ã‚½ãƒƒãƒ‰ = 1ãƒ†ã‚¹ãƒˆé …ç›®
- ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯ docstring ã‚’æ›¸ã
- ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¤œè¨¼ï¼‰ã¯æ˜ç¢ºã«

---

## 4. setUp ã¨ tearDown

### 4.1 setUpï¼ˆäº‹å‰æº–å‚™ï¼‰

```python
# âŒ æ‚ªã„ä¾‹ï¼šæ¯å›åŒã˜ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
class TestEmployee(unittest.TestCase):
    
    def test_get_name(self):
        emp = Employee()  # æ¯å›ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
        emp.set_name("ãƒ†ã‚¹ãƒˆ")
        self.assertEqual(emp.get_name(), "ãƒ†ã‚¹ãƒˆ")
    
    def test_get_salary(self):
        emp = Employee()  # ã¾ãŸä½œæˆï¼ˆé‡è¤‡ï¼‰
        emp.set_salary(250000)
        self.assertEqual(emp.get_salary(), 250000)
```

```python
# âœ… è‰¯ã„ä¾‹ï¼šsetUp ã§å…±é€šåŒ–
class TestEmployee(unittest.TestCase):
    
    def setUp(self):
        """å„ãƒ†ã‚¹ãƒˆã®å‰ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹"""
        self.emp = Employee()
        print("setUp: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ")
    
    def test_get_name(self):
        self.emp.set_name("ãƒ†ã‚¹ãƒˆ")
        self.assertEqual(self.emp.get_name(), "ãƒ†ã‚¹ãƒˆ")
    
    def test_get_salary(self):
        self.emp.set_salary(250000)
        self.assertEqual(self.emp.get_salary(), 250000)
```

**setUp ã®å½¹å‰²ï¼š**
- å„ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã®**å‰**ã«è‡ªå‹•å®Ÿè¡Œ
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ
- åˆæœŸè¨­å®š

### 4.2 tearDownï¼ˆå¾Œå‡¦ç†ï¼‰

```python
class TestDatabase(unittest.TestCase):
    
    def setUp(self):
        """ãƒ†ã‚¹ãƒˆå‰ï¼šDBæ¥ç¶š"""
        self.db = Database()
        self.db.connect()
        print("setUp: DBæ¥ç¶š")
    
    def tearDown(self):
        """ãƒ†ã‚¹ãƒˆå¾Œï¼šã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—"""
        self.db.disconnect()
        print("tearDown: DBåˆ‡æ–­")
    
    def test_insert(self):
        self.db.insert("test", "data")
        self.assertTrue(self.db.exists("test"))
```

**å®Ÿè¡Œé †åºï¼š**
```
1. setUp()
2. test_insert()
3. tearDown()
```

---

## 5. ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰å®Œå…¨ã‚¬ã‚¤ãƒ‰

### 5.1 ç­‰ä¾¡æ€§ã®ãƒ†ã‚¹ãƒˆ

```python
class TestAssertions(unittest.TestCase):
    
    def test_equal(self):
        """ç­‰ã—ã„ã“ã¨ã‚’ç¢ºèª"""
        self.assertEqual(1 + 1, 2)
        self.assertEqual("hello", "hello")
        self.assertEqual([1, 2], [1, 2])
    
    def test_not_equal(self):
        """ç­‰ã—ããªã„ã“ã¨ã‚’ç¢ºèª"""
        self.assertNotEqual(1, 2)
        self.assertNotEqual("hello", "world")
```

### 5.2 çœŸå½å€¤ã®ãƒ†ã‚¹ãƒˆ

```python
def test_boolean(self):
    """çœŸå½å€¤ã®ãƒ†ã‚¹ãƒˆ"""
    # True ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    self.assertTrue(True)
    self.assertTrue(1 < 2)
    self.assertTrue("abc".startswith("a"))
    
    # False ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    self.assertFalse(False)
    self.assertFalse(1 > 2)
    self.assertFalse("abc".startswith("z"))
```

### 5.3 None ã®ãƒ†ã‚¹ãƒˆ

```python
def test_none(self):
    """None ã®ãƒ†ã‚¹ãƒˆ"""
    value = None
    self.assertIsNone(value)
    
    value = "something"
    self.assertIsNotNone(value)
```

### 5.4 å‹ã®ãƒ†ã‚¹ãƒˆ

```python
def test_type(self):
    """å‹ã®ãƒ†ã‚¹ãƒˆ"""
    emp = Employee()
    
    # Employee ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ç¢ºèª
    self.assertIsInstance(emp, Employee)
    
    # ç¶™æ‰¿é–¢ä¿‚ã‚‚ç¢ºèªã§ãã‚‹
    staff = Staff()
    self.assertIsInstance(staff, Employee)  # Staff ã¯ Employee ã‚’ç¶™æ‰¿
```

### 5.5 ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ

```python
def test_collections(self):
    """ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ"""
    # ãƒªã‚¹ãƒˆã«è¦ç´ ãŒå«ã¾ã‚Œã‚‹ã‹
    self.assertIn(1, [1, 2, 3])
    self.assertIn("a", ["a", "b", "c"])
    
    # å«ã¾ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
    self.assertNotIn(4, [1, 2, 3])
    
    # ãƒªã‚¹ãƒˆå…¨ä½“ã®æ¯”è¼ƒ
    self.assertListEqual([1, 2, 3], [1, 2, 3])
```

### 5.6 å±æ€§ã®å­˜åœ¨ç¢ºèª

```python
def test_attributes(self):
    """å±æ€§ã®å­˜åœ¨ç¢ºèª"""
    staff = Staff()
    
    # ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã™ã‚‹ã‹ï¼ˆç¶™æ‰¿ã®ç¢ºèªã«ä¾¿åˆ©ï¼‰
    self.assertTrue(hasattr(staff, 'get_name'))
    self.assertTrue(hasattr(staff, 'get_salary'))
    self.assertTrue(hasattr(staff, 'get_division'))
```

### 5.7 ã‚ˆãä½¿ã†ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§è¡¨

| ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ | ç”¨é€” | ä½¿ç”¨ä¾‹ |
|------------|------|--------|
| `assertEqual(a, b)` | a == b | `assertEqual(result, 100)` |
| `assertNotEqual(a, b)` | a != b | `assertNotEqual(x, y)` |
| `assertTrue(x)` | x ãŒ True | `assertTrue(is_valid)` |
| `assertFalse(x)` | x ãŒ False | `assertFalse(has_error)` |
| `assertIsNone(x)` | x ãŒ None | `assertIsNone(result)` |
| `assertIsNotNone(x)` | x ãŒ None ã§ãªã„ | `assertIsNotNone(obj)` |
| `assertIn(a, b)` | a ãŒ b ã«å«ã¾ã‚Œã‚‹ | `assertIn("a", list)` |
| `assertIsInstance(a, b)` | a ãŒ b ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ | `assertIsInstance(obj, MyClass)` |

---

## 6. å®Ÿè·µï¼šæ®µéšçš„ãªãƒ†ã‚¹ãƒˆä½œæˆ

### Stage 1: å˜ç´”ãªã‚²ãƒƒã‚¿ãƒ¼/ã‚»ãƒƒã‚¿ãƒ¼ã®ãƒ†ã‚¹ãƒˆ

```python
class TestEmployee(unittest.TestCase):
    
    def setUp(self):
        self.emp = Employee()
    
    def test_set_and_get_name(self):
        """åå‰ã®è¨­å®šã¨å–å¾—"""
        # Arrangeï¼ˆæº–å‚™ï¼‰
        expected_name = "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼"
        
        # Actï¼ˆå®Ÿè¡Œï¼‰
        self.emp.set_name(expected_name)
        actual_name = self.emp.get_name()
        
        # Assertï¼ˆæ¤œè¨¼ï¼‰
        self.assertEqual(actual_name, expected_name)
```

**AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆArrange-Act-Assertï¼‰:**
- **Arrange**: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
- **Act**: ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚’å®Ÿè¡Œ
- **Assert**: çµæœã‚’æ¤œè¨¼

### Stage 2: è¤‡æ•°å±æ€§ã®ãƒ†ã‚¹ãƒˆ

```python
def test_complete_data(self):
    """å…¨å±æ€§ã®è¨­å®šã¨å–å¾—"""
    # å…¨å±æ€§ã‚’è¨­å®š
    self.emp.set_name("ãƒ¦ãƒ¼ã‚¶ãƒ¼A")
    self.emp.set_salary(300000)
    
    # å…¨å±æ€§ã‚’æ¤œè¨¼
    self.assertEqual(self.emp.get_name(), "ãƒ¦ãƒ¼ã‚¶ãƒ¼A")
    self.assertEqual(self.emp.get_salary(), 300000)
```

### Stage 3: ç¶™æ‰¿ã®ãƒ†ã‚¹ãƒˆ

```python
class TestStaff(unittest.TestCase):
    
    def setUp(self):
        self.staff = Staff()
    
    def test_inheritance(self):
        """ç¶™æ‰¿ã®ç¢ºèª"""
        # Staff ã¯ Employee ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹
        self.assertIsInstance(self.staff, Employee)
        
        # è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹
        self.assertTrue(hasattr(self.staff, 'get_name'))
        self.assertTrue(hasattr(self.staff, 'get_salary'))
    
    def test_division(self):
        """éƒ¨ç½²ã®ç®¡ç†ï¼ˆStaffå›ºæœ‰æ©Ÿèƒ½ï¼‰"""
        self.staff.set_division("é–‹ç™ºéƒ¨")
        self.assertEqual(self.staff.get_division(), "é–‹ç™ºéƒ¨")
```

### Stage 4: ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã®ãƒ†ã‚¹ãƒˆ

```python
class TestPresident(unittest.TestCase):
    
    def setUp(self):
        self.company = Company()
        self.president = self.company.ceo
    
    def test_name_override(self):
        """get_name() ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰"""
        self.president.set_name("ç¤¾é•·A")
        
        # ã€Œç¤¾é•·ã€ãŒè‡ªå‹•çš„ã«ä»˜ã
        self.assertEqual(self.president.get_name(), "ç¤¾é•·Aç¤¾é•·")
```

### Stage 5: ãƒªã‚¹ãƒˆã®æ“ä½œãƒ†ã‚¹ãƒˆ

```python
class TestCompany(unittest.TestCase):
    
    def setUp(self):
        self.company = Company()
    
    def test_add_staff(self):
        """ç¤¾å“¡è¿½åŠ ã®ãƒ†ã‚¹ãƒˆ"""
        # åˆæœŸçŠ¶æ…‹
        self.assertEqual(len(self.company.staffs), 0)
        
        # ç¤¾å“¡ã‚’è¿½åŠ 
        staff = Staff()
        staff.set_name("ç¤¾å“¡A")
        self.company.staffs.append(staff)
        
        # æ¤œè¨¼
        self.assertEqual(len(self.company.staffs), 1)
        self.assertEqual(self.company.staffs[0].get_name(), "ç¤¾å“¡A")
```

### Stage 6: å‰Šé™¤æ“ä½œã®ãƒ†ã‚¹ãƒˆ

```python
def test_dismiss(self):
    """è§£é›‡æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ"""
    # ç¤¾å“¡ã‚’2äººè¿½åŠ 
    staff1 = Staff()
    staff1.set_name("ç¤¾å“¡A")
    self.company.staffs.append(staff1)
    
    staff2 = Staff()
    staff2.set_name("ç¤¾å“¡B")
    self.company.staffs.append(staff2)
    
    # è§£é›‡å‰ã®ç¢ºèª
    self.assertEqual(len(self.company.staffs), 2)
    
    # ç¤¾å“¡Aã‚’è§£é›‡
    self.company.ceo.dismiss("ç¤¾å“¡A")
    
    # è§£é›‡å¾Œã®ç¢ºèª
    self.assertEqual(len(self.company.staffs), 1)
    self.assertEqual(self.company.staffs[0].get_name(), "ç¤¾å“¡B")
```

---

## 7. æ¨™æº–å‡ºåŠ›ã®ã‚­ãƒ£ãƒ—ãƒãƒ£

### ãªãœã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ã®ã‹ï¼Ÿ

```python
# print ãŒãƒ†ã‚¹ãƒˆçµæœã‚’è¦‹ã¥ã‚‰ãã™ã‚‹
def set_dismissal_procedure(self, name):
    print(f"{name}ã‚’è§£é›‡ã—ã¾ã—ãŸ")  # ã“ã®printã‚’æŠ‘åˆ¶ã—ãŸã„
    print(f"ç¾åœ¨ã®ç¤¾å“¡æ•°: {len(self.staffs)}äºº")
```

### ã‚­ãƒ£ãƒ—ãƒãƒ£ã®å®Ÿè£…

```python
from io import StringIO
import sys

class TestCompany(unittest.TestCase):
    
    def test_with_output_capture(self):
        """æ¨™æº–å‡ºåŠ›ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£"""
        # æ¨™æº–å‡ºåŠ›ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ç”¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«åˆ‡ã‚Šæ›¿ãˆ
        captured = StringIO()
        sys.stdout = captured
        
        # ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚’å®Ÿè¡Œï¼ˆprint ãŒ captured ã«ä¿å­˜ã•ã‚Œã‚‹ï¼‰
        self.company.set_dismissal_procedure("ç¤¾å“¡A")
        
        # æ¨™æº–å‡ºåŠ›ã‚’å…ƒã«æˆ»ã™
        sys.stdout = sys.__stdout__
        
        # é€šå¸¸ã®æ¤œè¨¼
        self.assertEqual(len(self.company.staffs), 0)
```

**ãƒã‚¤ãƒ³ãƒˆï¼š**
- `StringIO()`: ãƒ¡ãƒ¢ãƒªä¸Šã®æ–‡å­—åˆ—ãƒãƒƒãƒ•ã‚¡
- `sys.stdout`: æ¨™æº–å‡ºåŠ›å…ˆ
- `sys.__stdout__`: ã‚ªãƒªã‚¸ãƒŠãƒ«ã®æ¨™æº–å‡ºåŠ›

---

## 8. çµ±åˆãƒ†ã‚¹ãƒˆ

### çµ±åˆãƒ†ã‚¹ãƒˆã¨ã¯ï¼Ÿ

**å˜ä½“ãƒ†ã‚¹ãƒˆ**: å€‹åˆ¥ã®æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ
```python
def test_add_staff(self):
    """ç¤¾å“¡è¿½åŠ ã ã‘ã‚’ãƒ†ã‚¹ãƒˆ"""
    pass
```

**çµ±åˆãƒ†ã‚¹ãƒˆ**: è¤‡æ•°ã®æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ã¦ãƒ†ã‚¹ãƒˆ
```python
def test_complete_scenario(self):
    """å®Ÿéš›ã®æ¥­å‹™ãƒ•ãƒ­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ"""
    # 1. ä¼šç¤¾ä½œæˆ
    # 2. ç¤¾å“¡è¿½åŠ 
    # 3. ç¤¾é•·è¨­å®š
    # 4. è§£é›‡å®Ÿè¡Œ
    # 5. æœ€çµ‚çŠ¶æ…‹ç¢ºèª
    pass
```

### çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè£…ä¾‹

```python
class TestIntegration(unittest.TestCase):
    
    def test_complete_scenario(self):
        """å®Œå…¨ãªã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ"""
        # === 1. åˆæœŸè¨­å®š ===
        company = Company()
        
        # === 2. ç¤¾å“¡ç™»éŒ² ===
        staff1 = Staff()
        staff1.set_name("ç¤¾å“¡A")
        staff1.set_salary(250000)
        staff1.set_division("å–¶æ¥­éƒ¨")
        company.staffs.append(staff1)
        
        staff2 = Staff()
        staff2.set_name("ç¤¾å“¡B")
        staff2.set_salary(300000)
        staff2.set_division("é–‹ç™ºéƒ¨")
        company.staffs.append(staff2)
        
        # === 3. ç¤¾é•·è¨­å®š ===
        company.ceo.set_name("ç¤¾é•·A")
        company.ceo.set_salary(2500000)
        
        # === 4. ä¸­é–“æ¤œè¨¼ ===
        self.assertEqual(len(company.staffs), 2)
        self.assertEqual(company.ceo.get_name(), "ç¤¾é•·Aç¤¾é•·")
        
        # === 5. è§£é›‡å®Ÿè¡Œ ===
        company.ceo.dismiss("ç¤¾å“¡A")
        
        # === 6. æœ€çµ‚æ¤œè¨¼ ===
        self.assertEqual(len(company.staffs), 1)
        remaining = company.staffs[0]
        self.assertEqual(remaining.get_name(), "ç¤¾å“¡B")
        self.assertEqual(remaining.get_salary(), 300000)
        self.assertEqual(remaining.get_division(), "é–‹ç™ºéƒ¨")
```

**çµ±åˆãƒ†ã‚¹ãƒˆã®ã‚³ãƒ„ï¼š**
- âœ… å®Ÿéš›ã®ä½¿ç”¨ã‚·ãƒŠãƒªã‚ªã‚’å†ç¾
- âœ… è¤‡æ•°ã®æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ã‚‹
- âœ… é€”ä¸­çµŒéã‚‚æ¤œè¨¼ã™ã‚‹
- âœ… ã‚³ãƒ¡ãƒ³ãƒˆã§å‡¦ç†ã‚’åŒºåˆ‡ã‚‹

---

## 9. ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®ä½œæˆ

### ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã¨ã¯ï¼Ÿ

è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã‚’ã¾ã¨ã‚ã¦å®Ÿè¡Œã™ã‚‹ä»•çµ„ã¿ã€‚

```python
def run_tests_with_summary():
    """å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ"""
    # Step 1: ãƒ†ã‚¹ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’ä½œæˆ
    loader = unittest.TestLoader()
    
    # Step 2: ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆï¼ˆã‚³ãƒ³ãƒ†ãƒŠï¼‰ã‚’ä½œæˆ
    suite = unittest.TestSuite()
    
    # Step 3: ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
    suite.addTests(loader.loadTestsFromTestCase(TestEmployee))
    suite.addTests(loader.loadTestsFromTestCase(TestStaff))
    suite.addTests(loader.loadTestsFromTestCase(TestPresident))
    suite.addTests(loader.loadTestsFromTestCase(TestCompany))
    
    # Step 4: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    runner = unittest.TextTestRunner(verbosity=2)
    result = runner.run(suite)
    
    # Step 5: çµæœã‚µãƒãƒªãƒ¼
    print(f"\nå®Ÿè¡Œ: {result.testsRun}ä»¶")
    print(f"æˆåŠŸ: {result.testsRun - len(result.failures)}ä»¶")
    print(f"å¤±æ•—: {len(result.failures)}ä»¶")
    
    return result.wasSuccessful()
```

**verbosity ã®å€¤ï¼š**
- `0`: ã‚¨ãƒ©ãƒ¼ã®ã¿è¡¨ç¤º
- `1`: å„ãƒ†ã‚¹ãƒˆã‚’ `.` ã§è¡¨ç¤ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- `2`: å„ãƒ†ã‚¹ãƒˆã®åå‰ã‚’è©³ç´°è¡¨ç¤º

---

## 10. å®Ÿè·µçš„ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰è¨­è¨ˆ

### 10.1 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†

```python
# âŒ æ‚ªã„ä¾‹ï¼šãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼
def test_salary(self):
    self.emp.set_salary(250000)
    self.assertEqual(self.emp.get_salary(), 250000)

# âœ… è‰¯ã„ä¾‹ï¼šå®šæ•°åŒ–
class TestEmployee(unittest.TestCase):
    # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å®šæ•°ã¨ã—ã¦å®šç¾©
    TEST_NAME = "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼"
    TEST_SALARY = 250000
    TEST_DIVISION = "é–‹ç™ºéƒ¨"
    
    def test_salary(self):
        self.emp.set_salary(self.TEST_SALARY)
        self.assertEqual(self.emp.get_salary(), self.TEST_SALARY)
```

### 10.2 ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã®æ´»ç”¨

```python
class TestCompany(unittest.TestCase):
    
    def setUp(self):
        self.company = Company()
    
    # ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆtest_ ã§å§‹ã¾ã‚‰ãªã„ï¼‰
    def _create_test_staff(self, name, salary, division):
        """ãƒ†ã‚¹ãƒˆç”¨ç¤¾å“¡ã‚’ä½œæˆ"""
        staff = Staff()
        staff.set_name(name)
        staff.set_salary(salary)
        staff.set_division(division)
        return staff
    
    # ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã§ä½¿ç”¨
    def test_add_multiple_staff(self):
        staff1 = self._create_test_staff("ç¤¾å“¡A", 250000, "å–¶æ¥­éƒ¨")
        staff2 = self._create_test_staff("ç¤¾å“¡B", 300000, "é–‹ç™ºéƒ¨")
        
        self.company.staffs.append(staff1)
        self.company.staffs.append(staff2)
        
        self.assertEqual(len(self.company.staffs), 2)
```

### 10.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
def test_import_error(self):
    """ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆ"""
    try:
        from non_existent_module import SomeClass
        self.fail("ImportError ãŒç™ºç”Ÿã™ã¹ã")
    except ImportError as e:
        # ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¢ºèª
        self.assertIn("non_existent_module", str(e))
```

---

## 11. ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 11.1 ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸã‚‰

```
FAIL: test_salary (test_employee.TestEmployee)
----------------------------------------------------------------------
AssertionError: 250000 != 300000
```

**ç¢ºèªã™ã¹ãã“ã¨ï¼š**
1. âœ… æœŸå¾…å€¤ãŒæ­£ã—ã„ã‹ï¼Ÿ
2. âœ… ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã„ã‹ï¼Ÿ
3. âœ… setUp ã§ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãæº–å‚™ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ

### 11.2 ãƒ‡ãƒãƒƒã‚°ãƒ—ãƒªãƒ³ãƒˆ

```python
def test_salary(self):
    self.emp.set_salary(250000)
    
    # ãƒ‡ãƒãƒƒã‚°ç”¨ã«å€¤ã‚’å‡ºåŠ›
    print(f"DEBUG: salary = {self.emp.get_salary()}")
    
    self.assertEqual(self.emp.get_salary(), 250000)
```

### 11.3 ãƒ†ã‚¹ãƒˆã®é¸æŠå®Ÿè¡Œ

```bash
# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã ã‘å®Ÿè¡Œ
python -m unittest test_employee.TestEmployee

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã ã‘å®Ÿè¡Œ
python -m unittest test_employee.TestEmployee.test_salary

# verboseãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
python -m unittest test_employee.TestEmployee -v
```

---

## 12. å®Ÿè·µèª²é¡Œ

### èª²é¡Œ1: åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆï¼ˆåˆç´šï¼‰

ä»¥ä¸‹ã®ã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ãã ã•ã„ï¼š

```python
class BankAccount:
    def __init__(self):
        self.balance = 0
    
    def deposit(self, amount):
        self.balance += amount
    
    def withdraw(self, amount):
        if self.balance >= amount:
            self.balance -= amount
            return True
        return False
```

**æ›¸ãã¹ããƒ†ã‚¹ãƒˆï¼š**
- åˆæœŸæ®‹é«˜ãŒ0ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
- å…¥é‡‘å¾Œã®æ®‹é«˜ã‚’ç¢ºèª
- å‡ºé‡‘æˆåŠŸæ™‚ã®æ®‹é«˜ã‚’ç¢ºèª
- æ®‹é«˜ä¸è¶³æ™‚ã®æŒ™å‹•ã‚’ç¢ºèª

### èª²é¡Œ2: ãƒªã‚¹ãƒˆã®æ“ä½œï¼ˆä¸­ç´šï¼‰

```python
class TodoList:
    def __init__(self):
        self.items = []
    
    def add(self, item):
        self.items.append(item)
    
    def remove(self, item):
        if item in self.items:
            self.items.remove(item)
            return True
        return False
    
    def count(self):
        return len(self.items)
```

**æ›¸ãã¹ããƒ†ã‚¹ãƒˆï¼š**
- è¿½åŠ æ©Ÿèƒ½
- å‰Šé™¤æ©Ÿèƒ½
- ä»¶æ•°ã‚«ã‚¦ãƒ³ãƒˆ
- å­˜åœ¨ã—ãªã„é …ç›®ã®å‰Šé™¤

### èª²é¡Œ3: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆä¸Šç´šï¼‰

ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ãã ã•ã„ï¼š
- å•†å“è¿½åŠ  â†’ å€‹æ•°å¤‰æ›´ â†’ å‰Šé™¤ â†’ åˆè¨ˆé‡‘é¡è¨ˆç®—

---

## 13. ã¾ã¨ã‚ï¼šãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### âœ… ã‚„ã‚‹ã¹ãã“ã¨

1. **setUp ã§å…±é€šæº–å‚™ã‚’è¡Œã†**
   ```python
   def setUp(self):
       self.obj = MyClass()
   ```

2. **1ãƒ†ã‚¹ãƒˆ1æ¤œè¨¼ã‚’å¿ƒãŒã‘ã‚‹**
   ```python
   def test_one_thing(self):
       # 1ã¤ã®æ©Ÿèƒ½ã ã‘ã‚’ãƒ†ã‚¹ãƒˆ
       pass
   ```

3. **ãƒ†ã‚¹ãƒˆåã‚’èª¬æ˜çš„ã«ã™ã‚‹**
   ```python
   def test_salary_cannot_be_negative(self):
       # åå‰ã‹ã‚‰ä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹åˆ†ã‹ã‚‹
       pass
   ```

4. **AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã†**
   ```python
   # Arrange
   # Act
   # Assert
   ```

### âŒ é¿ã‘ã‚‹ã¹ãã“ã¨

1. **ãƒ†ã‚¹ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚**
   ```python
   # âŒ test_a ã®çµæœã« test_b ãŒä¾å­˜
   ```

2. **ãƒ†ã‚¹ãƒˆã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯**
   ```python
   # âŒ ãƒ†ã‚¹ãƒˆå†…ã§è¤‡é›‘ãªè¨ˆç®—
   ```

3. **æ›–æ˜§ãªã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³**
   ```python
   # âŒ self.assertTrue(result)  # ä½•ãŒ True?
   # âœ… self.assertEqual(result, expected_value)
   ```

---

## 14. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### ã•ã‚‰ã«å­¦ã¶ã¹ãã“ã¨

1. **pytest ã¸ã®ç§»è¡Œ**
   - ã‚ˆã‚ŠæŸ”è»Ÿãªãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
   - ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£æ©Ÿèƒ½ãŒå¼·åŠ›

2. **ãƒ¢ãƒƒã‚¯ã®æ´»ç”¨**
   - `unittest.mock` ã§ãƒ€ãƒŸãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
   - å¤–éƒ¨ä¾å­˜ã‚’æ’é™¤

3. **ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š**
   ```bash
   pip install coverage
   coverage run -m unittest
   coverage report
   ```

4. **CI/CD ã¸ã®çµ±åˆ**
   - GitHub Actions
   - GitLab CI
   - Jenkins

---

## ä»˜éŒ²ï¼šã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python -m unittest discover

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œ
python test_employee.py

# verboseãƒ¢ãƒ¼ãƒ‰
python -m unittest -v

# å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ã¿å†å®Ÿè¡Œ
python -m unittest --failfast
```

### ã‚ˆãä½¿ã†ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³

```python
# ç­‰ä¾¡æ€§
assertEqual(a, b)
assertNotEqual(a, b)

# çœŸå½å€¤
assertTrue(x)
assertFalse(x)

# None
assertIsNone(x)
assertIsNotNone(x)

# åŒ…å«
assertIn(a, b)
assertNotIn(a, b)

# å‹
assertIsInstance(a, Type)

# ä¾‹å¤–
assertRaises(ExceptionType)
```

---

ã“ã®ã‚¬ã‚¤ãƒ‰ã‚’å‚è€ƒã«ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ç·´ç¿’ã—ã¦ãã ã•ã„ã€‚  
**ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯æ›¸ã‘ã°æ›¸ãã»ã©ä¸Šé”ã—ã¾ã™ï¼** ğŸš€
