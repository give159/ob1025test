"""
ç¤¾å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè©³ç´°ã‚³ãƒ¡ãƒ³ãƒˆç‰ˆï¼‰

å„è¡Œã«è©³ç´°ãªã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ãŸè§£èª¬ç‰ˆã§ã™ã€‚
"""

# unittest: Pythonæ¨™æº–ã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
import unittest
# sys: ã‚·ã‚¹ãƒ†ãƒ é–¢é€£ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
import sys
# StringIO: æ–‡å­—åˆ—ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ˆã†ã«æ‰±ãˆã‚‹ã‚¯ãƒ©ã‚¹ï¼ˆæ¨™æº–å‡ºåŠ›ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ã«ä½¿ç”¨ï¼‰
from io import StringIO

# ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
# employee_system_all_in_one.py ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
# è¤‡æ•°ã®ã‚¯ãƒ©ã‚¹ã‚’ä¸€åº¦ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚æ‹¬å¼§ã§ã¾ã¨ã‚ã¦ã„ã‚‹
from employee_system_all_in_one import (
    Employee,    # ç¤¾å“¡åŸºåº•ã‚¯ãƒ©ã‚¹
    Staff,       # ä¸€èˆ¬ç¤¾å“¡ã‚¯ãƒ©ã‚¹
    President,   # ç¤¾é•·ã‚¯ãƒ©ã‚¹
    Company      # ä¼šç¤¾ã‚¯ãƒ©ã‚¹
)


# ============================================================
# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
# ============================================================

class TestEmployee(unittest.TestCase):
    """
    Employeeã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
    unittest.TestCase ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨ã§ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã«ãªã‚‹
    """
    
    def setUp(self):
        """
        å„ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã®å‰ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹æº–å‚™å‡¦ç†
        setUp ã¯ unittest.TestCase ã®ç‰¹æ®Šãƒ¡ã‚½ãƒƒãƒ‰
        """
        # ãƒ†ã‚¹ãƒˆç”¨ã® Employee ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
        # self.employee ã¯å…¨ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰å‚ç…§å¯èƒ½
        self.employee = Employee()
    
    def test_initial_values(self):
        """
        åˆæœŸå€¤ã®ãƒ†ã‚¹ãƒˆ
        test_ ã§å§‹ã¾ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹
        """
        # assertEqual(å®Ÿéš›ã®å€¤, æœŸå¾…å€¤): 2ã¤ã®å€¤ãŒç­‰ã—ã„ã‹ãƒã‚§ãƒƒã‚¯
        # åˆæœŸçŠ¶æ…‹ã§ã¯åå‰ã¯ç©ºæ–‡å­—åˆ—ã®ã¯ãš
        self.assertEqual(self.employee.get_name(), "")
        # åˆæœŸçŠ¶æ…‹ã§ã¯çµ¦æ–™ã¯0ã®ã¯ãš
        self.assertEqual(self.employee.get_salary(), 0)
        # ãƒ†ã‚¹ãƒˆæˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼ˆâœ“ã¯æˆåŠŸãƒãƒ¼ã‚¯ï¼‰
        print("âœ“ Employeeã®åˆæœŸå€¤ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_set_and_get_name(self):
        """åå‰ã®è¨­å®šã¨å–å¾—ã®ãƒ†ã‚¹ãƒˆ"""
        # åå‰ã‚’è¨­å®š
        self.employee.set_name("å±±ç”°å¤ªéƒ")
        # è¨­å®šã—ãŸåå‰ãŒæ­£ã—ãå–å¾—ã§ãã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        self.assertEqual(self.employee.get_name(), "å±±ç”°å¤ªéƒ")
        print("âœ“ åå‰ã®è¨­å®šãƒ»å–å¾—ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_set_and_get_salary(self):
        """çµ¦æ–™ã®è¨­å®šã¨å–å¾—ã®ãƒ†ã‚¹ãƒˆ"""
        # çµ¦æ–™ã‚’è¨­å®š
        self.employee.set_salary(300000)
        # è¨­å®šã—ãŸçµ¦æ–™ãŒæ­£ã—ãå–å¾—ã§ãã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        self.assertEqual(self.employee.get_salary(), 300000)
        print("âœ“ çµ¦æ–™ã®è¨­å®šãƒ»å–å¾—ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_name_update(self):
        """åå‰ã®æ›´æ–°ãƒ†ã‚¹ãƒˆ - å€¤ãŒä¸Šæ›¸ãã•ã‚Œã‚‹ã‹ç¢ºèª"""
        # æœ€åˆã®åå‰ã‚’è¨­å®š
        self.employee.set_name("ç”°ä¸­ä¸€éƒ")
        # è¨­å®šã—ãŸåå‰ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(self.employee.get_name(), "ç”°ä¸­ä¸€éƒ")
        # åå‰ã‚’åˆ¥ã®å€¤ã«æ›´æ–°
        self.employee.set_name("ç”°ä¸­æ¬¡éƒ")
        # æ›´æ–°å¾Œã®åå‰ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(self.employee.get_name(), "ç”°ä¸­æ¬¡éƒ")
        print("âœ“ åå‰ã®æ›´æ–°ãƒ†ã‚¹ãƒˆæˆåŠŸ")


class TestStaff(unittest.TestCase):
    """Staffã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹"""
    
    def setUp(self):
        """å„ãƒ†ã‚¹ãƒˆã®å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹æº–å‚™å‡¦ç†"""
        # ãƒ†ã‚¹ãƒˆç”¨ã® Staff ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
        self.staff = Staff()
    
    def test_inheritance(self):
        """
        ç¶™æ‰¿ã®ãƒ†ã‚¹ãƒˆ - Staff ãŒ Employee ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã‹ç¢ºèª
        """
        # assertIsInstance(ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ, ã‚¯ãƒ©ã‚¹): ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒ‡å®šã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ç¢ºèª
        # Staff ã¯ Employee ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã®ã§ True ã«ãªã‚‹ã¯ãš
        self.assertIsInstance(self.staff, Employee)
        
        # assertTrue(æ¡ä»¶å¼): æ¡ä»¶å¼ãŒ True ã‹ãƒã‚§ãƒƒã‚¯
        # hasattr(ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ, 'å±æ€§å'): ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒ‡å®šå±æ€§ã‚’æŒã¤ã‹ç¢ºèª
        # è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ get_name ã‚’æŒã£ã¦ã„ã‚‹ã‹ç¢ºèª
        self.assertTrue(hasattr(self.staff, 'get_name'))
        # è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ get_salary ã‚’æŒã£ã¦ã„ã‚‹ã‹ç¢ºèª
        self.assertTrue(hasattr(self.staff, 'get_salary'))
        print("âœ“ Staffç¶™æ‰¿ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_division_initial_value(self):
        """éƒ¨ç½²ã®åˆæœŸå€¤ãƒ†ã‚¹ãƒˆ"""
        # åˆæœŸçŠ¶æ…‹ã§ã¯éƒ¨ç½²ã¯ç©ºæ–‡å­—åˆ—ã®ã¯ãš
        self.assertEqual(self.staff.get_division(), "")
        print("âœ“ éƒ¨ç½²ã®åˆæœŸå€¤ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_set_and_get_division(self):
        """éƒ¨ç½²ã®è¨­å®šã¨å–å¾—ã®ãƒ†ã‚¹ãƒˆ"""
        # éƒ¨ç½²ã‚’è¨­å®š
        self.staff.set_division("é–‹ç™ºéƒ¨")
        # è¨­å®šã—ãŸéƒ¨ç½²ãŒæ­£ã—ãå–å¾—ã§ãã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        self.assertEqual(self.staff.get_division(), "é–‹ç™ºéƒ¨")
        print("âœ“ éƒ¨ç½²ã®è¨­å®šãƒ»å–å¾—ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_complete_staff_data(self):
        """å®Œå…¨ãªç¤¾å“¡ãƒ‡ãƒ¼ã‚¿ã®ãƒ†ã‚¹ãƒˆ - ã™ã¹ã¦ã®å±æ€§ã‚’è¨­å®šã—ã¦ç¢ºèª"""
        # åå‰ã‚’è¨­å®š
        self.staff.set_name("ä½è—¤å¤ªéƒ")
        # çµ¦æ–™ã‚’è¨­å®š
        self.staff.set_salary(200000)
        # éƒ¨ç½²ã‚’è¨­å®š
        self.staff.set_division("å–¶æ¥­éƒ¨")
        
        # è¨­å®šã—ãŸåå‰ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(self.staff.get_name(), "ä½è—¤å¤ªéƒ")
        # è¨­å®šã—ãŸçµ¦æ–™ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(self.staff.get_salary(), 200000)
        # è¨­å®šã—ãŸéƒ¨ç½²ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(self.staff.get_division(), "å–¶æ¥­éƒ¨")
        print("âœ“ å®Œå…¨ãªç¤¾å“¡ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆæˆåŠŸ")


class TestPresident(unittest.TestCase):
    """Presidentã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹"""
    
    def setUp(self):
        """å„ãƒ†ã‚¹ãƒˆã®å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹æº–å‚™å‡¦ç†"""
        # ãƒ†ã‚¹ãƒˆç”¨ã® Company ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
        self.company = Company()
        # Company ã® ceo ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰ President ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—
        self.president = self.company.ceo
    
    def test_inheritance(self):
        """ç¶™æ‰¿ã®ãƒ†ã‚¹ãƒˆ - President ãŒ Employee ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã‹ç¢ºèª"""
        # President ã¯ Employee ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã¯ãš
        self.assertIsInstance(self.president, Employee)
        print("âœ“ Presidentç¶™æ‰¿ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_name_override(self):
        """
        get_name()ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ãƒ†ã‚¹ãƒˆ
        President ã‚¯ãƒ©ã‚¹ã¯ get_name() ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦ã€Œç¤¾é•·ã€ã‚’è¿½åŠ ã™ã‚‹
        """
        # ç¤¾é•·ã®åå‰ã‚’è¨­å®š
        self.president.set_name("å‰äº•æ‰äºº")
        # get_name() ã¯ã€Œå‰äº•æ‰äººç¤¾é•·ã€ã‚’è¿”ã™ã¯ãšï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã•ã‚Œã¦ã„ã‚‹ï¼‰
        self.assertEqual(self.president.get_name(), "å‰äº•æ‰äººç¤¾é•·")
        print("âœ“ åå‰ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_company_reference(self):
        """ä¼šç¤¾ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸ã®å‚ç…§ãƒ†ã‚¹ãƒˆ"""
        # assertIsNotNone(å€¤): å€¤ãŒ None ã§ãªã„ã“ã¨ã‚’ç¢ºèª
        # ç¤¾é•·ã¯ä¼šç¤¾ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸ã®å‚ç…§ã‚’æŒã£ã¦ã„ã‚‹ã¯ãš
        self.assertIsNotNone(self.president._company)
        # ç¤¾é•·ãŒå‚ç…§ã—ã¦ã„ã‚‹ä¼šç¤¾ãŒ setUp ã§ä½œæˆã—ãŸä¼šç¤¾ã¨åŒã˜ã‹ç¢ºèª
        self.assertEqual(self.president._company, self.company)
        print("âœ“ ä¼šç¤¾å‚ç…§ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_dismiss_method(self):
        """dismissãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆ - ç¤¾é•·ãŒç¤¾å“¡ã‚’è§£é›‡ã§ãã‚‹ã‹ç¢ºèª"""
        # === ç¤¾å“¡1ã‚’ä½œæˆã—ã¦è¿½åŠ  ===
        staff1 = Staff()
        staff1.set_name("å±±ç”°å¤ªéƒ")
        # ä¼šç¤¾ã®ç¤¾å“¡ãƒªã‚¹ãƒˆã«è¿½åŠ 
        self.company.staffs.append(staff1)
        
        # === ç¤¾å“¡2ã‚’ä½œæˆã—ã¦è¿½åŠ  ===
        staff2 = Staff()
        staff2.set_name("ç”°ä¸­èŠ±å­")
        self.company.staffs.append(staff2)
        
        # === è§£é›‡å‰ã®ç¢ºèª ===
        # len() ã§ãƒªã‚¹ãƒˆã®è¦ç´ æ•°ã‚’å–å¾—
        # ç¤¾å“¡ãŒ2äººã„ã‚‹ã¯ãš
        self.assertEqual(len(self.company.staffs), 2)
        
        # === è§£é›‡å®Ÿè¡Œ ===
        # ç¤¾é•·ã® dismiss ãƒ¡ã‚½ãƒƒãƒ‰ã§å±±ç”°å¤ªéƒã‚’è§£é›‡
        self.president.dismiss("å±±ç”°å¤ªéƒ")
        
        # === è§£é›‡å¾Œã®ç¢ºèª ===
        # ç¤¾å“¡ãŒ1äººã«ãªã£ã¦ã„ã‚‹ã¯ãš
        self.assertEqual(len(self.company.staffs), 1)
        # ãƒªã‚¹ãƒˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ [0] ã§æœ€åˆã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹
        # æ®‹ã£ã¦ã„ã‚‹ã®ã¯ç”°ä¸­èŠ±å­ã®ã¯ãš
        self.assertEqual(self.company.staffs[0].get_name(), "ç”°ä¸­èŠ±å­")
        print("âœ“ dismissãƒ¡ã‚½ãƒƒãƒ‰ãƒ†ã‚¹ãƒˆæˆåŠŸ")


class TestCompany(unittest.TestCase):
    """Companyã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹"""
    
    def setUp(self):
        """å„ãƒ†ã‚¹ãƒˆã®å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹æº–å‚™å‡¦ç†"""
        # ãƒ†ã‚¹ãƒˆç”¨ã® Company ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
        self.company = Company()
    
    def test_initial_state(self):
        """åˆæœŸçŠ¶æ…‹ã®ãƒ†ã‚¹ãƒˆ"""
        # åˆæœŸçŠ¶æ…‹ã§ã¯ç¤¾å“¡ãƒªã‚¹ãƒˆã¯ç©ºï¼ˆè¦ç´ æ•°0ï¼‰ã®ã¯ãš
        self.assertEqual(len(self.company.staffs), 0)
        # åˆæœŸçŠ¶æ…‹ã§ã‚‚ç¤¾é•·ã¯å­˜åœ¨ã™ã‚‹ã¯ãšï¼ˆNone ã§ã¯ãªã„ï¼‰
        self.assertIsNotNone(self.company.ceo)
        print("âœ“ åˆæœŸçŠ¶æ…‹ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_staffs_property(self):
        """staffsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ"""
        # staffs ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒãƒªã‚¹ãƒˆå‹ã‚’è¿”ã™ã‹ç¢ºèª
        # @property ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§å®šç¾©ã•ã‚ŒãŸã‚²ãƒƒã‚¿ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
        self.assertIsInstance(self.company.staffs, list)
        print("âœ“ staffsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_ceo_property(self):
        """ceoãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ"""
        # ceo ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ President å‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™ã‹ç¢ºèª
        self.assertIsInstance(self.company.ceo, President)
        print("âœ“ ceoãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_add_staff(self):
        """ç¤¾å“¡è¿½åŠ ã®ãƒ†ã‚¹ãƒˆ"""
        # æ–°ã—ã„ç¤¾å“¡ã‚’ä½œæˆ
        staff = Staff()
        staff.set_name("éˆ´æœ¨æ¬¡éƒ")
        # ç¤¾å“¡ãƒªã‚¹ãƒˆã«è¿½åŠ 
        self.company.staffs.append(staff)
        
        # ç¤¾å“¡ãŒ1äººè¿½åŠ ã•ã‚ŒãŸã‹ç¢ºèª
        self.assertEqual(len(self.company.staffs), 1)
        # è¿½åŠ ã—ãŸç¤¾å“¡ã®åå‰ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(self.company.staffs[0].get_name(), "éˆ´æœ¨æ¬¡éƒ")
        print("âœ“ ç¤¾å“¡è¿½åŠ ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_multiple_staff(self):
        """è¤‡æ•°ç¤¾å“¡ã®ç®¡ç†ãƒ†ã‚¹ãƒˆ"""
        # range(5) ã¯ 0,1,2,3,4 ã®æ•°åˆ—ã‚’ç”Ÿæˆ
        # for ãƒ«ãƒ¼ãƒ—ã§5äººã®ç¤¾å“¡ã‚’ä½œæˆ
        for i in range(5):
            staff = Staff()
            # f-string ã§å‹•çš„ã«åå‰ã‚’ç”Ÿæˆï¼ˆç¤¾å“¡1, ç¤¾å“¡2, ...ï¼‰
            # i+1 ã¯ 0å§‹ã¾ã‚Šã‚’ 1å§‹ã¾ã‚Šã«å¤‰æ›
            staff.set_name(f"ç¤¾å“¡{i+1}")
            # çµ¦æ–™ã‚‚å‹•çš„ã«è¨­å®šï¼ˆ200000, 210000, 220000, ...ï¼‰
            staff.set_salary(200000 + i * 10000)
            # éƒ¨ç½²ã‚‚å‹•çš„ã«è¨­å®šï¼ˆéƒ¨ç½²1, éƒ¨ç½²2, ...ï¼‰
            staff.set_division(f"éƒ¨ç½²{i+1}")
            # ç¤¾å“¡ãƒªã‚¹ãƒˆã«è¿½åŠ 
            self.company.staffs.append(staff)
        
        # 5äººã®ç¤¾å“¡ãŒè¿½åŠ ã•ã‚ŒãŸã‹ç¢ºèª
        self.assertEqual(len(self.company.staffs), 5)
        print("âœ“ è¤‡æ•°ç¤¾å“¡ç®¡ç†ãƒ†ã‚¹ãƒˆæˆåŠŸ")
    
    def test_set_dismissal_procedure(self):
        """è§£é›‡æ‰‹ç¶šããƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆ"""
        # === ç¤¾å“¡1ã‚’ä½œæˆã—ã¦è¿½åŠ  ===
        staff1 = Staff()
        staff1.set_name("ä½è—¤å¤ªéƒ")
        self.company.staffs.append(staff1)
        
        # === ç¤¾å“¡2ã‚’ä½œæˆã—ã¦è¿½åŠ  ===
        staff2 = Staff()
        staff2.set_name("éˆ´æœ¨æ¬¡éƒ")
        self.company.staffs.append(staff2)
        
        # === è§£é›‡å‰ã®ç¢ºèª ===
        self.assertEqual(len(self.company.staffs), 2)
        
        # === æ¨™æº–å‡ºåŠ›ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ ===
        # StringIO() ã§æ–‡å­—åˆ—ãƒ™ãƒ¼ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
        captured_output = StringIO()
        # sys.stdout ã‚’ StringIO ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§ print ã®å‡ºåŠ›ã‚’æŠ‘åˆ¶
        sys.stdout = captured_output
        
        # === è§£é›‡å®Ÿè¡Œ ===
        # ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§ç¤¾å“¡æ•°ã‚’ print ã™ã‚‹ãŒã€
        # å‡ºåŠ›ã¯ captured_output ã«ä¿å­˜ã•ã‚Œã‚‹
        self.company.set_dismissal_procedure("ä½è—¤å¤ªéƒ")
        
        # === æ¨™æº–å‡ºåŠ›ã‚’å¾©å…ƒ ===
        # sys.__stdout__ ã¯å…ƒã®æ¨™æº–å‡ºåŠ›ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        # é€šå¸¸ã® print ãŒå†ã³ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹
        sys.stdout = sys.__stdout__
        
        # === è§£é›‡å¾Œã®ç¢ºèª ===
        # ç¤¾å“¡ãŒ1äººã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
        self.assertEqual(len(self.company.staffs), 1)
        # æ®‹ã£ã¦ã„ã‚‹ã®ã¯éˆ´æœ¨æ¬¡éƒã‹ç¢ºèª
        self.assertEqual(self.company.staffs[0].get_name(), "éˆ´æœ¨æ¬¡éƒ")
        print("âœ“ è§£é›‡æ‰‹ç¶šããƒ†ã‚¹ãƒˆæˆåŠŸ")


class TestIntegration(unittest.TestCase):
    """
    çµ±åˆãƒ†ã‚¹ãƒˆ - å®Ÿéš›ã®ä½¿ç”¨ã‚·ãƒŠãƒªã‚ªã‚’ãƒ†ã‚¹ãƒˆ
    å€‹åˆ¥ã®æ©Ÿèƒ½ã§ã¯ãªãã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å‹•ä½œã‚’ç¢ºèª
    """
    
    def test_complete_scenario(self):
        """å®Œå…¨ãªã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ"""
        # åŒºåˆ‡ã‚Šç·šã‚’è¡¨ç¤º
        # \n ã¯æ”¹è¡Œã€"="*60 ã¯ "=" ã‚’60å€‹ç¹°ã‚Šè¿”ã™
        print("\n" + "="*60)
        print("çµ±åˆãƒ†ã‚¹ãƒˆ: å®Œå…¨ãªã‚·ãƒŠãƒªã‚ªå®Ÿè¡Œ")
        print("="*60)
        
        # === 1. ä¼šç¤¾ä½œæˆ ===
        company = Company()
        print("1. ä¼šç¤¾ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ âœ“")
        
        # === 2. ç¤¾å“¡1ã‚’è¿½åŠ  ===
        staff1 = Staff()
        staff1.set_name("ä½è—¤å¤ªéƒ")
        staff1.set_salary(200000)
        staff1.set_division("å–¶æ¥­éƒ¨")
        company.staffs.append(staff1)
        # f-string ã§ã‚²ãƒƒã‚¿ãƒ¼ã®æˆ»ã‚Šå€¤ã‚’åŸ‹ã‚è¾¼ã¿
        print(f"2. {staff1.get_name()}ã‚’è¿½åŠ  âœ“")
        
        # === 3. ç¤¾å“¡2ã‚’è¿½åŠ  ===
        staff2 = Staff()
        staff2.set_name("éˆ´æœ¨æ¬¡éƒ")
        staff2.set_salary(300000)
        staff2.set_division("é–‹ç™ºéƒ¨")
        company.staffs.append(staff2)
        print(f"3. {staff2.get_name()}ã‚’è¿½åŠ  âœ“")
        
        # === 4. ç¤¾é•·è¨­å®š ===
        company.ceo.set_name("å‰äº•æ‰äºº")
        company.ceo.set_salary(2500000)
        # get_name() ã¯ã€Œå‰äº•æ‰äººç¤¾é•·ã€ã‚’è¿”ã™
        print(f"4. {company.ceo.get_name()}ã‚’è¨­å®š âœ“")
        
        # === 5. æ¤œè¨¼ ===
        # ç¤¾å“¡æ•°ãŒ2äººã‹ç¢ºèª
        self.assertEqual(len(company.staffs), 2)
        # ç¤¾é•·åãŒæ­£ã—ã„ã‹ç¢ºèªï¼ˆã€Œç¤¾é•·ã€ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ï¼‰
        self.assertEqual(company.ceo.get_name(), "å‰äº•æ‰äººç¤¾é•·")
        print("5. ç¤¾å“¡æ•°ã¨ç¤¾é•·åã‚’æ¤œè¨¼ âœ“")
        
        # === ç¤¾å“¡æƒ…å ±è¡¨ç¤º ===
        print("\nç¾åœ¨ã®ç¤¾å“¡:")
        # for ãƒ«ãƒ¼ãƒ—ã§å…¨ç¤¾å“¡ã®æƒ…å ±ã‚’è¡¨ç¤º
        for staff in company.staffs:
            # ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆï¼ˆ2ã‚¹ãƒšãƒ¼ã‚¹ï¼‰ã‚’ä»˜ã‘ã¦è¡¨ç¤º
            print(f"  - {staff.get_name()}: {staff.get_salary()}å††, {staff.get_division()}")
        # ç¤¾é•·ã®æƒ…å ±ã‚‚è¡¨ç¤º
        print(f"ç¤¾é•·: {company.ceo.get_name()}: {company.ceo.get_salary()}å††")
        
        # === 6. è§£é›‡ ===
        print(f"\n6. {staff1.get_name()}ã‚’è§£é›‡")
        # ç¤¾é•·ã® dismiss ãƒ¡ã‚½ãƒƒãƒ‰ã§ç¤¾å“¡ã‚’è§£é›‡
        company.ceo.dismiss("ä½è—¤å¤ªéƒ")
        # ç¤¾å“¡ãŒ1äººã«ãªã£ãŸã‹ç¢ºèª
        self.assertEqual(len(company.staffs), 1)
        print("   è§£é›‡å®Œäº† âœ“")
        
        # === æœ€çµ‚ç¢ºèª ===
        # ãƒªã‚¹ãƒˆã®æœ€åˆã®è¦ç´ ï¼ˆæ®‹ã£ãŸç¤¾å“¡ï¼‰ã‚’å–å¾—
        remaining_staff = company.staffs[0]
        # æ®‹ã£ãŸç¤¾å“¡ã®åå‰ãŒéˆ´æœ¨æ¬¡éƒã‹ç¢ºèª
        self.assertEqual(remaining_staff.get_name(), "éˆ´æœ¨æ¬¡éƒ")
        # çµ¦æ–™ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(remaining_staff.get_salary(), 300000)
        # éƒ¨ç½²ãŒæ­£ã—ã„ã‹ç¢ºèª
        self.assertEqual(remaining_staff.get_division(), "é–‹ç™ºéƒ¨")
        
        # æœ€çµ‚çŠ¶æ…‹ã‚’è¡¨ç¤º
        print("\næœ€çµ‚ç¤¾å“¡:")
        print(f"  - {remaining_staff.get_name()}: {remaining_staff.get_salary()}å††, {remaining_staff.get_division()}")
        print("="*60)
        print("çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº† âœ“âœ“âœ“")
        print("="*60)


# ============================================================
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œéƒ¨åˆ†
# ============================================================

def run_tests_with_summary():
    """
    ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã‚µãƒãƒªãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    
    Returns:
        bool: ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ãŸã‚‰ Trueã€å¤±æ•—ãŒã‚ã‚Œã° False
    """
    print("\n" + "="*60)
    print("ç¤¾å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ")
    print("="*60)
    print(f"ã‚¤ãƒ³ãƒãƒ¼ãƒˆå…ƒ: employee_system_all_in_one.py")
    print("="*60 + "\n")
    
    # === ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®ä½œæˆ ===
    # TestLoader: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã®ã‚¯ãƒ©ã‚¹
    loader = unittest.TestLoader()
    # TestSuite: è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ã¾ã¨ã‚ã‚‹ã‚³ãƒ³ãƒ†ãƒŠ
    suite = unittest.TestSuite()
    
    # === å„ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã‚’ã‚¹ã‚¤ãƒ¼ãƒˆã«è¿½åŠ  ===
    # loadTestsFromTestCase(): ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã‹ã‚‰å…¨ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’èª­ã¿è¾¼ã‚€
    suite.addTests(loader.loadTestsFromTestCase(TestEmployee))
    suite.addTests(loader.loadTestsFromTestCase(TestStaff))
    suite.addTests(loader.loadTestsFromTestCase(TestPresident))
    suite.addTests(loader.loadTestsFromTestCase(TestCompany))
    suite.addTests(loader.loadTestsFromTestCase(TestIntegration))
    
    # === ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ ===
    # TextTestRunner: ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦çµæœã‚’è¡¨ç¤ºã™ã‚‹ã‚¯ãƒ©ã‚¹
    # verbosity=2: è©³ç´°åº¦2ï¼ˆè©³ã—ãè¡¨ç¤ºï¼‰
    runner = unittest.TextTestRunner(verbosity=2)
    # run(): ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿè¡Œã—ã¦çµæœã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™
    result = runner.run(suite)
    
    # === çµæœã‚µãƒãƒªãƒ¼ ===
    print("\n" + "="*60)
    print("ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼")
    print("="*60)
    # testsRun: å®Ÿè¡Œã•ã‚ŒãŸãƒ†ã‚¹ãƒˆæ•°
    print(f"å®Ÿè¡Œãƒ†ã‚¹ãƒˆæ•°: {result.testsRun}")
    # æˆåŠŸæ•° = å…¨ãƒ†ã‚¹ãƒˆæ•° - å¤±æ•—æ•° - ã‚¨ãƒ©ãƒ¼æ•°
    print(f"æˆåŠŸ: {result.testsRun - len(result.failures) - len(result.errors)}")
    # failures: ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—ã®ãƒªã‚¹ãƒˆ
    print(f"å¤±æ•—: {len(result.failures)}")
    # errors: ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸãƒ†ã‚¹ãƒˆã®ãƒªã‚¹ãƒˆ
    print(f"ã‚¨ãƒ©ãƒ¼: {len(result.errors)}")
    
    # wasSuccessful(): ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ãŸã‹åˆ¤å®š
    if result.wasSuccessful():
        # ğŸ‰ ã¯çµµæ–‡å­—ï¼ˆç¥ç¦ãƒãƒ¼ã‚¯ï¼‰
        print("\nğŸ‰ ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸï¼")
    else:
        # âŒ ã¯çµµæ–‡å­—ï¼ˆãƒãƒ„ãƒãƒ¼ã‚¯ï¼‰
        print("\nâŒ ã„ãã¤ã‹ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã—ãŸ")
    
    print("="*60)
    
    # æˆåŠŸ/å¤±æ•—ã®çœŸå½å€¤ã‚’è¿”ã™
    return result.wasSuccessful()


# ============================================================
# ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
# ============================================================
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç›´æ¥å®Ÿè¡Œã•ã‚ŒãŸã¨ãã®ã¿ä»¥ä¸‹ã‚’å®Ÿè¡Œ
if __name__ == "__main__":
    # try-except: ä¾‹å¤–å‡¦ç†ã®æ§‹æ–‡
    try:
        # ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã‚µãƒãƒªãƒ¼ã‚’è¡¨ç¤º
        success = run_tests_with_summary()
        # sys.exit(): ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã™ã‚‹
        # 0: æ­£å¸¸çµ‚äº†ã€1: ç•°å¸¸çµ‚äº†ï¼ˆæ…£ä¾‹ï¼‰
        # ä¸‰é …æ¼”ç®—å­: (Trueã®å ´åˆã®å€¤) if æ¡ä»¶ else (Falseã®å ´åˆã®å€¤)
        sys.exit(0 if success else 1)
    # ImportError: importæ–‡ãŒå¤±æ•—ã—ãŸã¨ãã®ä¾‹å¤–
    # as e: ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ•° e ã«ä»£å…¥
    except ImportError as e:
        print("="*60)
        print("âŒ ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼")
        print("="*60)
        # ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ e ã®å†…å®¹ã‚’è¡¨ç¤º
        print(f"ã‚¨ãƒ©ãƒ¼å†…å®¹: {e}")
        print("\nè§£æ±ºæ–¹æ³•:")
        print("1. employee_system_all_in_one.py ãŒåŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ã‹ç¢ºèª")
        print("2. ãƒ•ã‚¡ã‚¤ãƒ«åãŒæ­£ã—ã„ã‹ç¢ºèª")
        print("3. ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª:")
        print("   dir *.py")
        print("="*60)
        # ç•°å¸¸çµ‚äº†ï¼ˆçµ‚äº†ã‚³ãƒ¼ãƒ‰1ï¼‰
        sys.exit(1)

# ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§è¨˜è¼‰ï¼ˆå‚ç…§ç”¨ï¼‰
#test_import_main.py
